---
title: "Term Project"
author: "Grace Damaschino, Tyler Lopez, Oriana Ramirez, Daniel Seiler"
self-contained: true
editor: source
format: 
  html:
    self-contained: true
    code-fold: false
    code-tools: true
    toc: true
execute: 
  echo: true
  warning: false
  message: false
  error: true
---

## Environment Setup & Data Import

```{r setup}
#| message: FALSE
library(tidyverse)
library(here)
library(readr)
library(purrr)
```

```{r data import}
#| message: FALSE
murder_RAW <- read_csv(here::here("murder_per_100000_people.csv"))
SDI_RAW <- read_csv(here::here("sdi.csv"))
```

## Data Preparation

Initial separate data treatment to adjust dataframes to the same column dimensions.

```{r}
murder <- murder_RAW |> 
  select("country", "1989":"2006") |> 
  mutate(data_type = "Murder Rate per 100K") |> 
  relocate(data_type, .after = country)
```

```{r}
SDI <- SDI_RAW |> 
  select("country", "1989":"2006") |> 
  mutate(data_type = "Sustainable Development Index") |> 
  relocate(data_type, .after = country)
```

Both dataframes stacked for further treatment.

```{r}
data_RAW <- rbind(murder, SDI)
```

```{r}
data_RAW <- data_RAW |> 
  rowwise() |> 
  mutate(NA_percent = sum(is.na(across(everything())))/length(across("1989":"2006"))) |>  # Remove all rows with more than 10% NAs
  filter(NA_percent < 0.15 | country == "United States") |>                               # Remove all rows with more than 10% NAs
  ungroup() |> 
  group_by(country) |>                                # remove countries that don't have murder rate and SDI info
  filter(n() > 1 | country == "United States") |>     # remove countries that don't have murder rate and SDI info
  ungroup() |> 
  arrange(country)
```

::: callout-warning
### Country Selection

Here is the list of eligible countries for analysis, spanning from 1989 to 2006 (the last year where the US has data). if we choose not to analyze the US, then this data set could be extended to the early/mid 2010s since most of these countries have datapoints in that time period.

```{r}
data_RAW |> 
  distinct(country) |> 
  pull(country)
```
:::

```{r}
select_countries <- c("United States", "Australia", "Germany", "Singapore", "Japan")  # Final list of countries chosen for analysis
# 
data <- data_RAW |>
  filter(country %in% select_countries)
```

#Data info:

Our analysis will be on the relationship between the murder rate and the sustainability development index in multiple countries throughout the world. Two quantitative datasets titled Murders (per 100,000 people) and Sustainable Development Index were found on Gapminder. The Murders (per 100,000 people) dataset contains information on mortality per 100,000 people for 118 countries between 1949 to 2015. The mortality rate was adjusted by standard population and age so that all countries in the dataset have the same age composition of the population. The Sustainable Development Index dataset contains an efficiency metric for 165 countries between 1989 to 2018. The Sustainability Development Index (SDI) is a metric based on a Human Development Index (HDI) and an Ecological Impact Index. The human development index is the geometric mean of life expectancy, education, and modified income indices (Figure 1), while the ecological impact index (Figure 2) is based on the "extent to which consumption-based CO2 emissions and material footprint exceed per-capita shares of planetary boundaries" (Sustainable Development Index, 2019).

![](images/HDI.png){fig-align="center"}

Figure 1. HDI formula based on the geometric mean of life expectancy, education, and modified income indices. MYSI is the Mean Years of Schooling Index, EYSI is the Expected Years of Schooling Index, and GNI is Gross National Income (Methodology and Data, n.d.).

![](images/SDI.png){fig-align="center"}

Figure 2. Ecological Impact Index formula based on the Average Overshoot (AO) of material footprint (MF) and CO2 emissions.

#Hypothesis:

We would hypothesize that the sustainability development index is strongly negatively correlated with murder rate, due to the wide variety of factors (as discussed above) that play into the sustainable development index. The sustainable development index is as much a measure of well-being and progress as it is sustainability, as a result of this we would expect a rise in murder rate to correspond with a drop in SDI. In terms of limitations of our regression model, we would also hypothesize that due to the wide net cast by the sustainable development index, there may be significant confounding variables or even possible redundancies limiting the applications of this analysis. For instance, SDI is calculated in large part from HDI, HDI incorporates life expectancy into their data, and a high murder rate would result in some reduction of life expectancy, thus reducing the SDI ranking directly.

**References:** 

Sustainable Development Index. (2019). Gapminder. <https://www.gapminder.org/data/> 

Methodology and Data. (n.d.). SUSTAINABLE DEVELOPMENT INDEX. <https://www.sustainabledevelopmentindex.org/methods.> 
